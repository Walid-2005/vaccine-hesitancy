{% extends 'base.html' %}

{% block content %}
<!-- Breadcrumb -->
<section id="bc" class="mt-3">
    <div class="container">
      <nav>
        <ol class="breadcrumb">
          <li class="breadcrumb-item">
            <a >DATA</a>
          </li>
        </ol>
      </nav>
    </div>
</section>

<!-- Listing -->
<section id="listing" class="py-4">
    <div class="container">
      <div class="row">
        <div class="col-md-12">

            <div class="mb-3">
                <a href="{% url 'download_excel' %}" class="btn btn-primary">Download Excel</a>
              </div>
              
          <!-- Scrollable Table Wrapper -->
          <div class="table-responsive">
            <table class="table table-striped table-bordered table-hover">
                <thead class="thead-dark">
                    <tr>
                        <th>ID</th>
                        <th>Age</th>
                        <th>Sex</th>
                        <th>Marital Status</th>
                        <th>Children</th>
                        <th>Place</th>
                        <th>Qualification</th>
                        <th>Job</th>
                        <th>Q1</th>
                        <th>Q2</th>
                        <th>Q3</th>
                        <th>Q4</th>
                        <th>Q5</th>
                        <th>Q6</th>
                        <th>Q7</th>
                        <th>Q8</th>
                        <th>Q9</th>
                        <th>Q10</th>
                        <th>Q11</th>
                        <th>Q12</th>
                        <th>Q13</th>
                        <th>Q14</th>
                        <th>Q15</th>
                        <th>Q16</th>
                        <th>Q17</th>
                        <th>Q18</th>
                        <th>Q19</th>
                        <th>Q20</th>
                        <th>Q21</th>
                        <th>Q22</th>
                        <th>Q23</th>
                        <th>Q24</th>
                        <th>Q25</th>
                        <th>Q26</th>
                        <th>Q27</th>
                        <th>Q28</th>
                        <th>Q29</th>
                        <th>Q30</th>
                        <th>Hesitancy</th>
                        <th>Predicted Hesitancy</th>
                    </tr>
                </thead>
                <tbody>
                  {% for respondent in data_items %}
                      <tr>
                          <td>{{ respondent.user_id }}</td>
                          <td>{{ respondent.age }}</td>
                          <td>{{ respondent.sex }}</td>
                          <td>{{ respondent.marital_status }}</td>
                          <td>{{ respondent.no_of_children }}</td>
                          <td>{{ respondent.place }}</td>
                          <td>{{ respondent.qualification }}</td>
                          <td>{{ respondent.job }}</td>
              
                          {% if respondent.responses %}
                              <td>{{ respondent.responses.question1 }}</td>
                              <td>{{ respondent.responses.question2 }}</td>
                              <td>{{ respondent.responses.question3 }}</td>
                              <td>{{ respondent.responses.question4 }}</td>
                              <td>{{ respondent.responses.question5 }}</td>
                              <td>{{ respondent.responses.question6 }}</td>
                              <td>{{ respondent.responses.question7 }}</td>
                              <td>{{ respondent.responses.question8 }}</td>
                              <td>{{ respondent.responses.question9 }}</td>
                              <td>{{ respondent.responses.question10 }}</td>
                              <td>{{ respondent.responses.question11 }}</td>
                              <td>{{ respondent.responses.question12 }}</td>
                              <td>{{ respondent.responses.question13 }}</td>
                              <td>{{ respondent.responses.question14 }}</td>
                              <td>{{ respondent.responses.question15 }}</td>
                              <td>{{ respondent.responses.question16 }}</td>
                              <td>{{ respondent.responses.question17 }}</td>
                              <td>{{ respondent.responses.question18 }}</td>
                              <td>{{ respondent.responses.question19 }}</td>
                              <td>{{ respondent.responses.question20 }}</td>
                              <td>{{ respondent.responses.question21 }}</td>
                              <td>{{ respondent.responses.question22 }}</td>
                              <td>{{ respondent.responses.question23 }}</td>
                              <td>{{ respondent.responses.question24 }}</td>
                              <td>{{ respondent.responses.question25 }}</td>
                              <td>{{ respondent.responses.question26 }}</td>
                              <td>{{ respondent.responses.question27 }}</td>
                              <td>{{ respondent.responses.question28 }}</td>
                              <td>{{ respondent.responses.question29 }}</td>
                              <td>{{ respondent.responses.question30 }}</td>
                              <td>{{ respondent.responses.hesitancy_result }}</td>
                              <td>{{ respondent.responses.hesitancy_score|floatformat:2 }}%</td>
                          {% else %}
                              <td colspan="10">No response data</td>
                          {% endif %}
                      </tr>
                  {% empty %}
                      <tr>
                          <td colspan="10">No respondents found.</td>
                      </tr>
                  {% endfor %}
              </tbody>
              
            </table>
          </div> <!-- End of table-responsive -->
        </div>
      </div>
    </div>
</section>
{% endblock %}
